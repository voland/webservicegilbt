@* @using webservicegilbt.shared *@
<EditForm Model="@Pres" OnInvalidSubmit="@HandleValidSubmit">
	<h1>
		<h>Screen slide-show:</h>
	</h1>
	<p>
		@foreach ( Page p in Pres.pages){
		<hr style="height:2px;border-width:0;color:gray;background-color:gray">
		<table class="my_custom_table" style="widht:80%">
				<tr class="my_custom_th_verydark">
					<th>Type</th>
					<th>Position</th>
					<th>Parameters</th>
					<th>Result</th>
					<th>Delete</th>
				</tr>
			@foreach( PageElement pe in p.elements){
				<tr class="my_custom_th @item_background">
					<td>
						<InputSelect TValue="ElementType" @bind-Value="pe.type">
							<option value="@ElementType.TEXT">Text</option>
							<option value="@ElementType.RECTANGLE">Rectangle</option>
							<option value="@ElementType.IMAGE">Image</option>
							<option value="@ElementType.TIME">Time</option>
							<option value="@ElementType.DATE">Date</option>
							<option value="@ElementType.SENSOR_TEMPERATURE">Sensor temperature</option>
							<option value="@ElementType.SENSOR_HUMIDITY">Sensor humidity</option>
							<option value="@ElementType.SENSOR_PRESSURE">Sensor pressure</option>
							@* just number *@
							<option value="@ElementType.SENSOR_PM2_5">Sensor pm2,5</option>
							<option value="@ElementType.SENSOR_PM10">Sensor pm10</option>
							<option value="@ElementType.SENSOR_PM1">Sensor pm1</option>
							@* data in percent value *@
							<option value="@ElementType.SENSOR_PM2_5_PERCENT">Sensor pm2,5 %</option>
							<option value="@ElementType.SENSOR_PM10_PERCENT">Sensor pm10 %</option>
							<option value="@ElementType.SENSOR_PM1_PERCENT">Sensor pm1 %</option>
							@* user firendly status *@
							<option value="@ElementType.SENSOR_PM2_5_STATUS">Sensor pm2,5 status</option>
							<option value="@ElementType.SENSOR_PM10_STATUS">Sensor pm10 status</option>
							<option value="@ElementType.SENSOR_PM1_STATUS">Sensor pm1 status</option>
							<option value="@ElementType.UID">Screen id</option>
						</InputSelect>
					</td>
					<td>
						<InputNumber TValue="Int32" @bind-Value="pe.x" style="width:70px" min="0" max="1024"/>
						X
						<InputNumber TValue="Int32" @bind-Value="pe.y" style="width:70px" min="0" max="1024"/>
					</td>
					<td>
						<InputSelect TValue="FontType" @bind-Value="pe.font">
							<option value="@FontType.fontnormal8px">Font normal 8px</option>
							<option value="@FontType.fontfat8px">Font fat 8px</option>
							<option value="@FontType.arial14">Arial 14px</option>
							<option value="@FontType.arial16">Arial 16px</option>
							<option value="@FontType.impact14">Impact 14px</option>
							<option value="@FontType.impact16">Impact 16px</option>
						</InputSelect>
						@switch ( pe.type ){
							case ElementType.TEXT:
								<InputText TValue="string" @bind-Value="pe.text"/>	
							break;
							case ElementType.SENSOR_PM1:
							case ElementType.SENSOR_PM10:
							case ElementType.SENSOR_PM2_5:
							case ElementType.SENSOR_TEMPERATURE:
							case ElementType.SENSOR_PRESSURE:
							case ElementType.SENSOR_HUMIDITY:
							case ElementType.SENSOR_PM2_5_PERCENT:
							case ElementType.SENSOR_PM10_PERCENT:
							case ElementType.SENSOR_PM1_PERCENT:
							case ElementType.SENSOR_PM2_5_STATUS:
							case ElementType.SENSOR_PM10_STATUS:
							case ElementType.SENSOR_PM1_STATUS:
								<InputNumber TValue="Int32" @bind-Value="pe.idx" @oninput="OnIdxChanched" style="width:70px" min="0" max="1024"/>
								<label>@pe.city</label>
							break;
							default:
							break;
						}
					</td>
					<td><label>@pe.text</label></td>
					<td> <button class="btn btn-primary" @onclick="()=>DeleteElement(p, pe)">Delete</button> </td>
				</tr>
			}
		</table>

		<button class="btn btn-primary" @onclick="()=>DeletePage(p)">Delete page</button>
		<button class="btn btn-primary" @onclick="()=>AddElement(p)">Add element</button>
		<button class="btn btn-primary" @onclick="()=>MoveUp(p)">Move up</button>
		<button class="btn btn-primary" @onclick="()=>MoveDown(p)">Move down</button>
		<label>Time in seconds: </label>
		<InputNumber TValue="Int32" @bind-Value="p.time" style="width:50px" min="1" max="60"/>
		}
	</p>
		<hr style="height:2px;border-width:0;color:gray;background-color:black">
	<p>
		<button class="btn btn-primary" @onclick="AddPageClicked">Add page</button>
	</p>
</EditForm>
